<!DOCTYPE html>

<html lang="en">

<head>
  <title>Jira/Confluernce on Docker</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- <link rel="stylesheet" href="/css/bootstrap.min.css"> -->
  <link rel="stylesheet" href="css/animate.css">
  <link rel="stylesheet" href="css/flexslider.css">
  <link rel="stylesheet" href="fonts/icomoon/style.css">

  <link rel="stylesheet" href="css/bootstrap.css">
  <link rel="stylesheet" href="css/style.css">

  <link rel="stylesheet" href="css/fontawesome-5.8.2-web-all.css">
  <link type="text/css" rel="stylesheet" href="lightGallery/src/css/lightgallery.css" />
  <link type="text/css" rel="stylesheet" href="lightGallery/dist/css/lg-transitions.css" />
  <link href="https://fonts.googleapis.com/css?family=Nunito+Sans:200,300,400,700" rel="stylesheet">

</head>

<body data-spy="scroll" data-target="#pb-navbar" data-offset="200">

  <nav class="navbar navbar-expand-lg site-navbar navbar-light bg-light" id="pb-navbar">
    <div class="container">
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbars_av_portfolio"
        aria-controls="navbars_av_portfolio" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <a class="navbar-brand" href="index.html#section-portfolio">Back to portfolio</a>
      <div class="collapse navbar-collapse justify-content-md-end" id="navbars_av_portfolio">
        <ul class="navbar-nav">
          <li class="nav-item"><a class="nav-link" href="#section-home">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="#section-about">About</a></li>
          <li class="nav-item"><a class="nav-link" href="#section-v100">v1.0.0</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <section class="site-hero" style="background-image: url(images/jiraConfluence/jira_confluence_background.jpg);"
    id="section-home" data-stellar-background-ratio="0.5">
    <div class="container">
      <div class="row intro-text align-items-center justify-content-center">
        <div class="col-md-10 text-center">
          <h1 class="site-heading site-animate"><strong>Jira/Confluence on docker</strong></h1>
          <p><a href="#section-about" class="smoothscroll btn btn-primary px-4 py-3">See more</a></p>
        </div>
      </div>
    </div>
  </section>

  <!-- section -->
  <!-- Start About project Area -->
  <section class="site-section" id="section-about">
    <div class="container">
      <div class="row mb-5 align-items-center">
        <div class="col-lg-7 pr-lg-5 mb-5 mb-lg-0">
          <img src="images/xmlBinaryConverter/xmlbc_about.jpg" alt="Image placeholder" class="img-fluid">
        </div>
        <div class="col-lg-5 pl-lg-5">
          <div class="section-heading">
            <h2>About this <strong> Project</strong></h2>
          </div>
          <p class="lead">
            In this poject I'll show you how I setup my Jira and Confluence instances in a Docker container.
          </p>
          <p class="lead">
            I designed ......
          </p>
          <p class="lead">
            Check bellow all steps.
          </p>

          <div class="row">
            <div class="col-6">
              <a href="#section-v100" class="btn btn-primary px-4 py-2 btn-sm smoothscroll">Latest Version</a>
            </div>
            <div class="col-6">
              <a href="https://github.com/anvaplus/jira-confluence" target="_blank"
                class="btn btn-primary px-4 py-2 btn-sm smoothscroll">Source code</a>
            </div>
          </div>

        </div>
      </div>

      <div class="row pt-5">
        <div class="col-md-3 mb-3">
          <div class="section-heading">
            <h2>Used <strong>Tools</strong></h2>
          </div>
        </div>
        <div class="col-md-9">
          <div class="skill">
            <h3>Docker</h3>
            <div class="progress">
              <div class="progress-bar" role="progressbar" style="width: 92%" aria-valuenow="92" aria-valuemin="0"
                aria-valuemax="100">
                <span>92%</span>
              </div>
            </div>
          </div>

          <div class="skill">
            <h3>Jira / Confluence</h3>
            <div class="progress">
              <div class="progress-bar" role="progressbar" style="width: 78%" aria-valuenow=78" aria-valuemin="0"
                aria-valuemax="100">
                <span>78%</span>
              </div>
            </div>
          </div>

          <div class="skill">
            <h3>SQL Server</h3>
            <div class="progress">
              <div class="progress-bar" role="progressbar" style="width: 80%" aria-valuenow="80" aria-valuemin="0"
                aria-valuemax="100">
                <span>80%</span>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </section>
  <!-- End About project Area -->

  <!-- Start Version 1.0.0 Area -->
  <section class="site-section bg-light" id="section-v100">
    <div class="container">
      <div class="section-heading text-center">
        <h2>Version 1.0.0 - <strong>"Dockerized Atlassian Jira"</strong></h2>
        <span class="date"><span class="icon-calendar"></span> Published on XX July 2020</span>
      </div>

      <div class="jira-db-conf">
        <div class="row m-1">
          <div class="section text-center col-md-12">
            <p class="lead"><strong>Jira database configuration</strong></p>
          </div>

          <p class="text-justify">
            Microsoft SQL Server is the chosed relational database management system used for this project.
            In order to configure the database from the environment, avoiding the need to do so through the web startup
            screen,
            the following variables must be supplied:
          <ul>
            <li><code>ATL_JDBC_URL</code> - The database URL; this is database-specific.</li>
            <li><code>ATL_JDBC_USER</code> - The database user to connect as.</li>
            <li><code>ATL_JDBC_PASSWORD</code> - The password for the database user.</li>
            <li><code>ATL_DB_DRIVER</code> - The JDBC driver class: <b><i>com.microsoft.sqlserver.jdbc.SQLServerDriver
                </i></b>in our case</li>
            <li><code>ATL_DB_TYPE</code> - The type of database: <b><i>mssql </i></b>in our case</li>
            <li><code>ATL_DB_SCHEMA_NAME</code> - The schema name of the database (optionally).
          </ul>
          </p>

          <p class="text-justify">
            The following <i>docker-compose</i> file spin up a docker continer with a SQL Server used to setup our
            database.
            How the volumes are the preferred mechanism for persisting data generated by and used by Docker containers,
            we will mount 2 volumes: the SQL Server data will be saved in <code>sql-data</code> volume and 
            the JIRA-HOME directory data will be saved in <code>jira-data</code> volume.
          </p>

          <div class="row m-1 text-left bg-white border col-md-12">
            <pre>

  version: "3.7"
  services: 
      sql-server:
          container_name: sql-server
          image: mcr.microsoft.com/mssql/server:2017-latest
          ports:
              - "1433:1433"
          environment: 
              ACCEPT_EULA: "Y" 
              SA_PASSWORD: "Password!_first"
          volumes: 
              - sql-data:/var/opt/mssql/data
  volumes:
      jira-data:</pre>
          </div><br>

          <p class="text-justify">
            Once the SQL Server container is up and running (<code>docker-compose up -d</code>), for security purposes we need change the SA password.
            The SA account is a system administrator on the SQL Server instance that gets created during setup.
            After creating your SQL Server container, the <i>SA_PASSWORD</i> environment variable you specified is
            discoverable by running <code>echo $SA_PASSWORD </code>in the container. Change the SA password with the
            following command:
          </p>

          <div class="row m-1 text-left bg-white border col-md-12">
            <pre>

    docker exec -it sql-server /opt/mssql-tools/bin/sqlcmd \
                -S localhost -U SA -P "Password!_first \
                -Q 'ALTER LOGIN SA WITH PASSWORD="Password!_new"'</pre>
          </div>
        </div>

        <p class="text-justify">Now we can configure the database for Jira. Open the SQL Server Management Studio and
          run the next commands:</p>
        <div class="row">
          <div class="col-sm">
            On master:
            <pre class="text-left bg-white border">
    CREATE DATABASE jiradb
    GO
  
    CREATE LOGIN jiraUser
    WITH PASSWORD = '[JiraPassword1!]'
    GO
  
  
            </pre>
          </div>
          <div class="col-sm">
            On jiradb:
            <pre class="text-left bg-white border">
    CREATE USER jiraUser
    FOR LOGIN jiraUser
    GO
    
    EXEC sp_addrolemember N'db_owner' , N'jiraUser'
    GO
    
    CREATE SCHEMA jiraschema
    GO       </pre>
          </div>
        </div>

        <br>
        <div class="row m-1">
          <div class="section text-center col-md-12">
            <p class="lead">
              Video demo - Setup Jira DB on SQL Server.
            </p>
          </div>

          <div class="media-gallery">
            <ul class="no-bullets" id="video_gallery">
              <li class="video" data-src="https://youtu.be/BvbccRSv9H0" data-sub-html="Setup Jira DB on SQL Server">
                <a href="">
                  <img class="img-responsive" src="images/jiraConfluence/PS_jiraDbConfig_poster.jpg">
                  <div class="media-gallery-poster">
                    <img src="images/play-button.png">
                  </div>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div><br><br>

      <div class="jira-setup>
        <div class="row m-1">
          <div class="section text-center col-md-12">
            <p class="lead"><strong>Jira Setup</strong></p>
          </div>

          <p class="text-justify">
            Now that the database setup is complete, the next step is to add a new service in <i>docker-compose</i> file, which becomes:
          </p>

          <div class="row m-1 text-left bg-white border col-md-12">
            <pre>

  version: "3.7"
  services: 
      sql-server:
          container_name: sql-server
          image: mcr.microsoft.com/mssql/server:2017-latest
          ports:
              - "1433:1433"
          environment: 
              ACCEPT_EULA: "Y" 
              SA_PASSWORD: "Password!_first"
          volumes: 
              - sql-data:/var/opt/mssql/data
      jira-software:
          container_name: jira-software
          image: atlassian/jira-software
          ports: 
              - "9000:8080"
          environment: 
              ATL_JDBC_URL: "jdbc:sqlserver://;serverName=sql-server;portNumber=1433;databaseName=jiradb"
              ATL_JDBC_USER: "jiraUser"
              ATL_JDBC_PASSWORD: "[JiraPassword1!]"
              ATL_DB_DRIVER: "com.microsoft.sqlserver.jdbc.SQLServerDriver"
              ATL_DB_TYPE: "mssql"
              ATL_DB_SCHEMA_NAME: "jiraschema"
          volumes: 
              - jira-data:/var/atlassian/application-data/jira
  volumes:
      sql-data:
      jira-data:</pre>
          </div><br>

          <p class="text-justify">
            The <code>docker-compuse up -d</code> command will spin up two docker containers, one with SQL Server and the another 
            one with Jira Software. Jira is now available on http://localhost:9000*. 
          </p>

        <br>
        <div class="row m-1">
          <div class="section text-center col-md-12">
            <p class="lead">
              Video demo - Jira on Docker.
            </p>
          </div>

          <div class="media-gallery">
            <ul class="no-bullets" id="video_gallery">
              <li class="video" data-src="https://youtu.be/CtVXYuwUotY" data-sub-html="XML Binary Converter Demo">
                <a href="">
                  <img class="img-responsive" src="images/xmlBinaryConverter/PS_xmlBinaryConverter_poster.jpg">
                  <div class="media-gallery-poster">
                    <img src="images/play-button.png">
                  </div>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>



    </div>
  </section>
  <!-- End Version 1.0.0 Area -->
  <!-- end section -->

  <footer class="site-footer">
    <div class="container">
      <div class="row mb-3">
        <div class="col-md-12 text-center">
          <p>
            <a href="mailto:andrei@anvaplus.com" class="social-item"><span class="fas fa-at"></span></a>
            <a href="https://www.linkedin.com/in/andrei-vasiliu-01259579/" target="_blank" class="social-item"><span
                class="fab fa-linkedin-in"></span></a>
            <a href="https://github.com/anvaplus" target="_blank" class="social-item"><span
                class="fab fa-github"></span></a>
            <a href="https://hub.docker.com/u/anvaplus" target="_blank" class="social-item"><span
                class="fab fa-docker"></span></a>
          </p>
        </div>
      </div>
      <div class="row">
        <p class="col-12 text-center">
          Copyright &copy;
          <script>document.write(new Date().getFullYear());</script> All rights reserved | Andrei Vasiliu</a>
        </p>
      </div>
    </div>
  </footer>


  <script src="js/vendor/jquery.min.js"></script>
  <script src="js/vendor/popper.min.js"></script>
  <script src="js/vendor/bootstrap.min.js"></script>

  <script src="js/vendor/jquery.easing.1.3.js"></script>
  <script src="js/vendor/jquery.stellar.min.js"></script>
  <script src="js/vendor/jquery.waypoints.min.js"></script>

  <script src="https://unpkg.com/isotope-layout@3/dist/isotope.pkgd.min.js"></script>
  <script src="https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
  <script src="js/custom.js"></script>



  <!-- jQuery version must be >= 1.8.0; -->
  <!-- <script src="js/jquery-3.4.1.min.js"></script> -->
  <script src="lightGallery/dist/js/lightgallery.js"></script>

  <!-- A jQuery plugin that adds cross-browser mouse wheel support.-->
  <script src="lightGallery/lib/jquery.mousewheel.min.js"></script>

  <!-- lightgallery plugins -->
  <script src="lightGallery/modules/lg-thumbnail.min.js"></script>
  <script src="lightGallery/modules/lg-fullscreen.min.js"></script>
  <script src="lightGallery/modules/lg-zoom.min.js"></script>
  <script src="lightGallery/modules/lg-video.min.js"></script>


  <script type="text/javascript">
    $(document).ready(function () {
      $('#video_gallery').lightGallery({
        youtubePlayerParams: {
          modestbranding: 1,
          rel: 0,
          controls: 1
        }
      });
    });
  </script>

  <!-- Google Map -->
  <script
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
  <script src="/js/google-map.js"></script>

</body>

</html>